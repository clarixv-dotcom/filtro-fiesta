<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Face Filter - Mis 15</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; height: 100%; }
    body { overflow: hidden; background: black; }
    canvas { display: block; width: 100vw; height: 100vh; }
    #info { 
      position: fixed; 
      bottom: 20px; 
      left: 50%; 
      transform: translateX(-50%); 
      background: rgba(255,255,255,0.9); 
      padding: 15px 30px; 
      border-radius: 25px; 
      font-size: 14px;
      z-index: 100;
    }
  </style>
</head>
<body>
  anvas id="canvas"></canvas>
  <div id="info">Cargando...</div>

  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-face.prod.js"></script>
  <script>
    (async function() {
      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');
      const info = document.getElementById('info');

      try {
        const mindarFace = new window.MINDAR.FACE.MindARFace();
        await mindarFace.setupCamera();
        
        canvas.width = mindarFace.width;
        canvas.height = mindarFace.height;
        
        await mindarFace.start();
        info.innerHTML = '✓ Filtro activo<br>Haz Screenshot para guardar';

        function render() {
          const imageData = mindarFace.getVideoData();
          ctx.putImageData(imageData, 0, 0);

          const faces = mindarFace.estimateFaces();
          
          // Dibuja un círculo verde alrededor de la cara
          if (faces.length > 0) {
            const face = faces[0];
            ctx.strokeStyle = '#00FF00';
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.arc(face.position[0], face.position[1], 80, 0, 2 * Math.PI);
            ctx.stroke();
          }

          requestAnimationFrame(render);
        }

        render();
      } catch (err) {
        info.innerHTML = '❌ Error: ' + err.message;
        console.error(err);
      }
    })();
  </script>
</body>
</html>
